<div class="status-manager">
  <div class="manager-header">
    <button mat-flat-button color="primary" (click)="openCreateDialog()">
      Novo status
    </button>
  </div>

  <div class="feedback" *ngIf="error">{{ error }}</div>

  <div class="status-list" *ngIf="!isLoading && hasStatuses; else fallbackTemplate">
    <div class="status-card" *ngFor="let status of statuses" [style.background]="colorFor(status)">
      <div class="status-header">
        <div class="status-info">
          <span class="status-name">{{ status.nome }}</span>
          <span class="status-description">{{ status.descricao || 'Sem descrição' }}</span>
        </div>
        <div class="actions">
          <mat-icon class="edite" (click)="openEditDialog(status)">edit</mat-icon>
          <mat-icon class="delete" (click)="confirmDelete(status)">delete</mat-icon>
        </div>
      </div>
    </div>
  </div>

  <ng-template #fallbackTemplate>
    <div class="loading" *ngIf="isLoading">Carregando status...</div>
    <div class="empty" *ngIf="!isLoading">
      <p>Nenhum status cadastrado no momento.</p>
      <p class="hint">Clique no botão "Novo status" para adicionar o primeiro.</p>
    </div>
  </ng-template>
</div>
